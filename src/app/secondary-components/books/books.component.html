<div class="container-fluid" style="min-height: -webkit-fill-available; overflow-y: auto; padding: 0 1rem;">
    <ngx-ui-loader></ngx-ui-loader>
    <app-navbar></app-navbar>

    <main class="top-section mt-5">
        <header class="header">
            <h1 class="logo">BOOKS</h1>
            <!-- <nav class="tabs">
                <button class="tab" [class.active]="activeTab === 'books'" (click)="setActiveTab('books')">
                    <span class="icon">ðŸ“–</span> Books
                </button>
                <button class="tab" [class.active]="activeTab === 'audiobooks'" (click)="setActiveTab('audiobooks')">
                    <span class="icon">ðŸŽ§</span> AudioBooks
                </button>
            </nav> -->
        </header>

        <!-- Current Reading Section -->
        <div class="current-reading-grid">
            <div class="reading-info">
                <h2>Currently<br>Reading</h2>
            </div>

            <div class="current-book-display">
                <div class="book-cover-wrapper">
                    <img *ngIf="currentBook" [src]="currentBook.cover" [alt]="currentBook.title">
                </div>
            </div>

            <div class="book-description-display">
                <span class="vertical-title">Description</span>
                <p *ngIf="currentBook" class="book-description" [innerHTML]="currentBook.description"></p>
            </div>
        </div>

        <!-- Shelf Decoration -->
        <div class="shelf">
            <div class="shelf-top"></div>
            <div class="shelf-front"></div>
        </div>

        <!-- Read Books Section -->
        <footer class="bottom-section">
            <div class="read-books-grid">
                <div class="read-books-info">
                    <span class="vertical-title">Read Books</span>
                </div>

                <div class="books-list-wrapper">
                    <!-- FILTERS + SORT -->
                    <div class="filters">
                        <div class="filter-control search-bar" title="Search by title or author or description">
                            <span class="icon">ðŸ”Ž</span>
                            <input #searchInput type="text" placeholder="Search title or author or description..."
                                (input)="applyFilters(searchInput.value, onlyThisYear.checked, sortSelect.value)">
                        </div>

                        <div class="filter-control checkbox-control">
                            <input #onlyThisYear type="checkbox" id="onlyYear"
                                (change)="applyFilters(searchInput.value, onlyThisYear.checked, sortSelect.value)">
                            <label for="onlyYear">Only this year</label>
                        </div>

                        <!-- Sort select -->
                        <div class="filter-control">
                            <select #sortSelect
                                (change)="applyFilters(searchInput.value, onlyThisYear.checked, sortSelect.value)">
                                <option value="recent">Most recent</option>
                                <option value="oldest">Oldest</option>
                                <option value="title_asc">Title A â†’ Z</option>
                                <option value="title_desc">Title Z â†’ A</option>
                                <option value="rating_desc">Rating â†“</option>
                                <option value="rating_asc">Rating â†‘</option>
                            </select>
                        </div>
                    </div>

                    <!-- BOOKS LIST -->
                    <div class="books-list">
                        <div class="book-card" *ngFor="let book of filteredReadBooks">
                            <div class="book-cover-wrapper">
                                <img [src]="book.cover" [alt]="book.title">
                            </div>
                            <div class="stars">
                                <ng-container *ngFor="let isFilled of getStarRating(book.rating); let i = index">
                                    <span class="star" [class.filled]="isFilled" [class.empty]="!isFilled">
                                        {{ isFilled ? 'â˜…' : 'â˜†' }}
                                    </span>
                                </ng-container>
                            </div>
                            <h4 class="book-title">{{ book.title }}</h4>
                            <p class="book-author">{{ book.author }}</p>
                            <p class="book-year">Read at {{ book.user_read_at | date: 'dd/MM/yyyy' }}</p>
                            <a [href]="book.link" class="read-more" target="_blank" rel="noopener noreferrer">
                                My Goodreads Review
                            </a>
                        </div>

                        <div class="no-results" *ngIf="filteredReadBooks.length === 0">
                            No books found with current filters.
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </main>

</div>